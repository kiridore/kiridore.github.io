<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>cocos2d-x学习记录#1</title>
    <link href="/2021/12/08/cocos2d-x%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-1/"/>
    <url>/2021/12/08/cocos2d-x%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-1/</url>
    
    <content type="html"><![CDATA[<p>在win10系统，使用VS2017进行配置，包括环境搭建与创建工程两个部分</p><span id="more"></span><h1 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h1><p>最近准备一个独立游戏项目，打算使用cocos2d-x作为引擎，没想到这个引擎最新版本居然是2019年更新而且仅支持vs2015（虽然我2017也成功用起来了，不知道后续会不会出现一些问题），这里记录一下在起步阶段踩的一些坑。</p><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>在开始之前需要先在电脑上安装</p><ul><li>Visual Studio 2017（2015是官方推荐的，但是今年已经不提供下载）</li><li>Python 2.7.5+ （不知道为什么在这个python2都要停止支持的年代还要用python2）</li><li>Cmake （cocos2d-x4.0已经不再提供vs工程，转而全面使用cmake）</li></ul><p>之后就可以从官网下载本体，并解压到一个空目录。之后就可以使用Cmake指令开始构建工程，首先在刚刚解压出来的<span class="label label-default">cocos2d-x-4.0</span>新建一个build目录，否则构建出的文件会直接撒在根目录，非常难受。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">mkdir win32-build<br>cd win32-build<br></code></pre></td></tr></table></figure><p>然后在build目录内（上面已经转入了build）执行cmake代码构建项目</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">cmake .. -G<span class="hljs-string">&quot;Visual Studio 15 2017&quot;</span> -vT141<br></code></pre></td></tr></table></figure><p>这里需要注意-G参数引号内的部分是大小写敏感的，如果写错了cmake会有相应提示，也可以输入<code>cmake -G --help</code>查看帮助生成自己需要的IDE项目。并且生成对应项目必须已经安装了IDE，比如没法在没有安装vs2022的电脑上生成对应工程文件。<br><img src="/img/cocos2dlearning/vs2017build.png"><br>运行结束后即可在之前创建的build目录中看到刚刚生成的.sln文件，使用对应IDE打开（这里我用的vs2017）就能看到各项库文件和自带的五个示例项目。这里可以右键对应项目选择生成或设置项目设置为启动项目，就可以按F5直接开始编译运行，整个过程大概在5-10分钟，之后就可以在/bin目录里找到生成的.exe文件。</p><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><p>在网上搜索到的直接使用Visual Studio新建项目的方法没法在我电脑上使用，只好选择用引擎自带的控制台工具生成，再用cmake构建工程。</p><p>在之前解压下来的cocos2d-x-4.0文件夹中，可以找到一个<span class="label label-default">setup.py</span>执行之后会自动安装cocos控制台并加入到环境变量，在控制台里输入<code>cocos -v</code>，显示</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cocos2d</span>-x-<span class="hljs-number">4</span>.<span class="hljs-number">0</span>    <br><span class="hljs-attribute">Cocos</span> Console <span class="hljs-number">2</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>即为安装成功，这时就可以使用对应的指令创建工程文件了，指令如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">cocos new <span class="hljs-tag">&lt;<span class="hljs-name">game</span> <span class="hljs-attr">name</span>&gt;</span> -p <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">identifier</span>&gt;</span> -l <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span> -d <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span><br></code></pre></td></tr></table></figure><p>比如这里我们使用</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">cocos new MyFirstGame -<span class="hljs-selector-tag">p</span> com<span class="hljs-selector-class">.Dore</span><span class="hljs-selector-class">.FirstGame</span> -l cpp -d D:\cocosProject<br></code></pre></td></tr></table></figure><p>就在目录生成了对应的工程文件</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gradle">    目录: D:\cocosProject\MyFirstGame<br><br><br>Mode                 LastWriteTime         Length Name<br>----                 -------------         ------ ----<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                Classes<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                cocos2d<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                proj.android<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                proj.ios_mac<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                proj.linux<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                proj.win32<br>d-----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>                Resources<br>-a----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>             <span class="hljs-number">72</span> .cocos-<span class="hljs-keyword">project</span>.json<br>-a----         <span class="hljs-number">2021</span><span class="hljs-regexp">/12/</span><span class="hljs-number">8</span>     <span class="hljs-number">20</span>:<span class="hljs-number">43</span>           <span class="hljs-number">5392</span> CMakeLists.txt<br></code></pre></td></tr></table></figure><p>生成之后再使用cmake同上面环境搭建部分一样进行构建即可</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/hunter_wyh/article/details/104377872">Cocos2dx-v4.0学习-使用CMake编译Cocos2d-4.0(For Visual Studio)</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.cocos.com/cocos2d-x/manual/zh/editors_and_tools/cocosCLTool.html">cocos官方文档</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>技术 - 游戏引擎</category>
      
    </categories>
    
    
    <tags>
      
      <tag>游戏引擎</tag>
      
      <tag>cocos2d</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
